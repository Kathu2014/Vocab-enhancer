<!DOCTYPE html>
<html lang="en">
<!-- Previous head and style sections remain the same -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Word Game!</title>
    <style>
        /* ... (keep all the previous CSS) ... */
        .almost-correct {
            background-color: #fff3cd;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            color: #856404;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <!-- Previous HTML structure remains the same -->
    <script>
        // Previous code remains the same until the checkGuess function

        // Add this helper function to calculate string similarity
        function calculateSimilarity(str1, str2) {
            // Convert both strings to lowercase for comparison
            str1 = str1.toLowerCase();
            str2 = str2.toLowerCase();
            
            // If strings are exactly the same, return 1
            if (str1 === str2) return 1;
            
            // If one string contains the other, it's probably a typo
            if (str1.includes(str2) || str2.includes(str1)) return 0.9;
            
            // Count matching characters
            let matches = 0;
            const longer = str1.length > str2.length ? str1 : str2;
            const shorter = str1.length > str2.length ? str2 : str1;
            
            // Count exact character matches
            for (let i = 0; i < shorter.length; i++) {
                if (shorter[i] === longer[i]) matches++;
            }
            
            // Calculate similarity score
            return matches / longer.length;
        }

        // Modified checkGuess function
        const checkGuess = () => {
            if (!gameActive || !guessInput.value) return;

            const guess = guessInput.value.toLowerCase();
            const similarity = calculateSimilarity(guess, currentWord);

            if (guess === currentWord) {
                message.textContent = 'ğŸ‰ Correct! You are amazing! â­';
                gameActive = false;
            } else if (similarity >= 0.75) { // If it's close enough to be a typo
                message.innerHTML = `
                    <div>ğŸ‰ Almost perfect! That's just a small typo!</div>
                    <div class="almost-correct">You typed "${guess}" - The word was "${currentWord}" but you got it! â­</div>
                `;
                gameActive = false;
            } else {
                attemptsLeft--;
                if (attemptsLeft === 0) {
                    message.textContent = `Game Over! The word was: ${currentWord} ğŸŒŸ`;
                    gameActive = false;
                } else {
                    message.textContent = `Try again! You have ${attemptsLeft} tries left! ğŸ’«`;
                    attempts.textContent = `Tries left: ${attemptsLeft} ğŸ²`;
                }
            }

            if (!gameActive) {
                guessInput.disabled = true;
                guessButton.disabled = true;
                attempts.textContent = '';
            }
            
            guessInput.value = '';
            if (gameActive) guessInput.focus();
        };

        // Rest of the code remains the same...
    </script>
</body>
</html>
