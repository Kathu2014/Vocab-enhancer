import React, { useState } from 'react';

const WordGame = () => {
  const [ageRange, setAgeRange] = useState('2-4');
  const [currentWord, setCurrentWord] = useState('');
  const [currentHint, setCurrentHint] = useState('');
  const [guess, setGuess] = useState('');
  const [attemptsLeft, setAttemptsLeft] = useState(3);
  const [message, setMessage] = useState('Press "New Word" to start! 🎮');
  const [gameActive, setGameActive] = useState(false);

  const words = {
    '2-4': {
      'apple': "A fruit that is red or green, often eaten by children.",
      'dog': "A common pet with four legs that barks.",
      'milk': "A white liquid that comes from cows, often drunk by babies.",
      'ball': "A round object used in many games.",
      'sun': "The star that gives us light and warmth."
    },
    '5-7': {
      'table': "A piece of furniture with four legs used for eating or writing.",
      'bicycle': "A two-wheeled vehicle that you pedal.",
      'school': "A place where children go to learn.",
      'family': "A group of people related to each other.",
      'computer': "A device used for work, play, or learning."
    }
  };

  const getNewWord = () => {
    const wordPool = words[ageRange];
    const wordList = Object.entries(wordPool);
    const [word, hint] = wordList[Math.floor(Math.random() * wordList.length)];
    setCurrentWord(word);
    setCurrentHint(hint);
    setAttemptsLeft(3);
    setGuess('');
    setMessage('Try to guess the word! 🎯');
    setGameActive(true);
  };

  const checkGuess = () => {
    if (guess.toLowerCase() === currentWord) {
      setMessage('🎉 Correct! You are amazing! ⭐');
      setGameActive(false);
    } else {
      const newAttempts = attemptsLeft - 1;
      setAttemptsLeft(newAttempts);
      if (newAttempts === 0) {
        setMessage(`Game Over! The word was: ${currentWord} 🌟`);
        setGameActive(false);
      } else {
        setMessage(`Try again! You have ${newAttempts} tries left! 💫`);
      }
    }
    setGuess('');
  };

  return (
    <div className="max-w-2xl mx-auto p-8 bg-white rounded-2xl shadow-xl">
      <div className="text-center mb-8">
        <h1 className="text-5xl font-bold text-purple-600 mb-2">
          Word Game! 🎮
        </h1>
        <p className="text-2xl text-purple-400">Learn new words and have fun! ✨</p>
      </div>

      <div className="space-y-8">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-purple-700 mb-4">
            Pick your age group:
          </h2>
          <div className="flex justify-center gap-4">
            <button
              onClick={() => setAgeRange('2-4')}
              className={`age-button ${
                ageRange === '2-4'
                  ? 'bg-pink-500 text-white'
                  : 'bg-pink-100 text-pink-500'
              }`}
            >
              Ages 2-4
            </button>
            <button
              onClick={() => setAgeRange('5-7')}
              className={`age-button ${
                ageRange === '5-7'
                  ? 'bg-purple-500 text-white'
                  : 'bg-purple-100 text-purple-500'
              }`}
            >
              Ages 5-7
            </button>
          </div>
        </div>

        {currentHint && (
          <div className="bg-blue-50 p-6 rounded-xl">
            <p className="text-xl text-blue-700">
              <span className="font-bold">Hint:</span> {currentHint} 💡
            </p>
          </div>
        )}

        <div className="space-y-4">
          <input
            type="text"
            value={guess}
            onChange={(e) => setGuess(e.target.value)}
            onKeyPress={(e) => {
              if (e.key === 'Enter' && gameActive) {
                checkGuess();
              }
            }}
            placeholder="Type your guess here! ✨"
            className="w-full p-4 text-xl border-2 border-purple-300 rounded-xl 
                     focus:outline-none focus:border-purple-500 text-center"
            disabled={!gameActive}
          />
          
          <div className="flex justify-center gap-4">
            <button
              onClick={checkGuess}
              disabled={!gameActive || !guess}
              className="game-button bg-green-500 text-white 
                       disabled:bg-gray-300 disabled:cursor-not-allowed"
            >
              Guess! 🎯
            </button>
            
            <button
              onClick={getNewWord}
              className="game-button bg-blue-500 text-white"
            >
              New Word! ⭐
            </button>
          </div>
        </div>

        <div className="text-center space-y-2">
          <p className="text-2xl font-bold text-purple-600">{message}</p>
          {gameActive && (
            <p className="text-xl font-medium text-purple-500">
              Tries left: {attemptsLeft} 🎲
            </p>
          )}
        </div>
      </div>
    </div>
  );
};

export default WordGame;
