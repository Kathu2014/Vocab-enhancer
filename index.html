import React, { useState } from 'react';

const WordGame = () => {
  const [ageRange, setAgeRange] = useState('2-4');
  const [currentWord, setCurrentWord] = useState('');
  const [currentHint, setCurrentHint] = useState('');
  const [guess, setGuess] = useState('');
  const [attemptsLeft, setAttemptsLeft] = useState(3);
  const [message, setMessage] = useState('Press "New Word" to start! 🎮');
  const [gameActive, setGameActive] = useState(false);

  const words = {
    '2-4': {
      'apple': "A fruit that is red or green, often eaten by children.",
      'dog': "A common pet with four legs that barks.",
      'milk': "A white liquid that comes from cows, often drunk by babies.",
      'ball': "A round object used in many games.",
      'sun': "The star that gives us light and warmth."
    },
    '5-7': {
      'table': "A piece of furniture with four legs used for eating or writing.",
      'bicycle': "A two-wheeled vehicle that you pedal.",
      'school': "A place where children go to learn.",
      'family': "A group of people related to each other.",
      'computer': "A device used for work, play, or learning."
    }
  };

  const getNewWord = () => {
    const wordPool = words[ageRange];
    const wordList = Object.entries(wordPool);
    const [word, hint] = wordList[Math.floor(Math.random() * wordList.length)];
    setCurrentWord(word);
    setCurrentHint(hint);
    setAttemptsLeft(3);
    setGuess('');
    setMessage('Try to guess the word! 🎯');
    setGameActive(true);
  };

  const checkGuess = () => {
    if (guess.toLowerCase() === currentWord) {
      setMessage('🎉 Correct! You are amazing! ⭐');
      setGameActive(false);
    } else {
      const newAttempts = attemptsLeft - 1;
      setAttemptsLeft(newAttempts);
      if (newAttempts === 0) {
        setMessage(`Game Over! The word was: ${currentWord} 🌟`);
        setGameActive(false);
      } else {
        setMessage(`Try again! You have ${newAttempts} tries left! 💫`);
      }
    }
    setGuess('');
  };

  return (
    <div className="max-w-2xl mx-auto p-8 bg-gradient-to-r from-pink-100 to-purple-100 rounded-2xl shadow-xl">
      <h1 className="text-5xl font-bold mb-8 text-center text-purple-600">
        Fun Word Game! 🎮
      </h1>

      <div className="space-y-6">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-purple-700 mb-4">
            Pick your age group:
          </h2>
          <div className="flex justify-center gap-4">
            {['2-4', '5-7'].map((age) => (
              <button
                key={age}
                onClick={() => setAgeRange(age)}
                className={`px-6 py-3 rounded-full text-xl font-bold transition-all duration-300 transform hover:scale-105 
                  ${ageRange === age 
                    ? 'bg-pink-500 text-white shadow-lg' 
                    : 'bg-white text-pink-500 hover:bg-pink-100'}`}
              >
                Ages {age}
              </button>
            ))}
          </div>
        </div>

        {currentHint && (
          <div className="bg-white p-6 rounded-xl shadow-lg">
            <p className="text-xl text-purple-700">
              <span className="font-bold">Hint:</span> {currentHint} 💭
            </p>
          </div>
        )}

        <div className="flex flex-col items-center gap-4">
          <input
            type="text"
            value={guess}
            onChange={(e) => setGuess(e.target.value)}
            onKeyPress={(e) => {
              if (e.key === 'Enter' && gameActive) {
                checkGuess();
              }
            }}
            placeholder="Type your guess here! ✨"
            className="w-full max-w-md p-4 text-xl border-3 border-purple-300 rounded-xl 
              focus:outline-none focus:border-purple-500 text-center"
            disabled={!gameActive}
          />
          
          <div className="flex gap-4">
            <button
              onClick={checkGuess}
              disabled={!gameActive || !guess}
              className="px-6 py-3 bg-green-500 text-white text-xl font-bold rounded-xl 
                shadow-lg hover:bg-green-600 transition-colors duration-300 
                disabled:bg-gray-300 disabled:cursor-not-allowed"
            >
              Guess! 🎯
            </button>
            
            <button
              onClick={getNewWord}
              className="px-6 py-3 bg-blue-500 text-white text-xl font-bold rounded-xl 
                shadow-lg hover:bg-blue-600 transition-colors duration-300"
            >
              New Word! ⭐
            </button>
          </div>
        </div>

        <div className="text-center space-y-2">
          <p className="text-2xl font-bold text-purple-600">{message}</p>
          {gameActive && (
            <p className="text-xl font-medium text-purple-500">
              Tries left: {attemptsLeft} 🎲
            </p>
          )}
        </div>
      </div>
    </div>
  );
};

export default WordGame;
